<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>canvas 时钟</title>
    <style>
        #clock{
            display: block;
            border: 1px solid;
            margin: auto;
        }
    </style>
    <script>
        window.onload=function(){
            var canvas=document.getElementById('clock');
            var context = canvas.getContext('2d');
            const RADIUS=100;
            const width=canvas.width/2
            drawClock()
            setInterval(()=>{
                context.clearRect(0,0,canvas.width,canvas.height)
                drawClock()
            },1000)
            function drawCircle(){
                context.beginPath()
                context.arc(width,width,RADIUS,0,2*Math.PI)
                context.stroke()
                context.save()
                context.beginPath()
                context.arc(width,width,5,0,2*Math.PI)
                context.fill()
            }
            function drawText(){
                var num=[3,4,5,6,7,8,9,10,11,12,1,2]
                var len=num.length;
                var ang=Math.PI/6;
                for(var i=0;i<num.length;i++){
                    context.font="18px 微软雅黑"
                    context.textAlign="center";
                    context.textBaseline="middle";
                    let angle=i<6?(i*ang):-(12-i)*ang;
                    context.fillText(num[i],width+(RADIUS-15)*Math.cos(angle),width+(RADIUS-15)*Math.sin(angle));
                }
          
            }
            function drawPointer(){
                var date=new Date();
                var h=(date.getHours()+1)>12?date.getHours()-12:date.getHours();
                var m=date.getMinutes();
                var s=date.getSeconds();
                var h_angle=-getangle(Math.PI*h/6+Math.PI/6*m/60);
                var m_angle=-getangle(Math.PI*m/30+Math.PI/30*s/60)
                var s_angle=-getangle(s/30*Math.PI);
                var h_r=RADIUS*0.5,m_r=RADIUS*0.7,s_r=RADIUS*0.9;

                drawLine(width,width,width+h_r*Math.cos(h_angle),width+h_r*Math.sin(h_angle));
                drawLine(width,width,width+m_r*Math.cos(m_angle),width+m_r*Math.sin(m_angle));
                drawLine(width,width,width+s_r*Math.cos(s_angle),width+s_r*Math.sin(s_angle));
            }
           
            function getangle(angle){
                if(angle<=1.5*Math.PI){
                    return 0.5*Math.PI-angle
                }else{
                    return 2.5*Math.PI-angle
                }
            }
            function drawLine(initx,inity,endx,endy){
                context.moveTo(initx,inity);
                context.lineTo(endx,endy);
                context.stroke()
            }
            function drawClock(){
                drawCircle()
                drawText()
                drawPointer()
            }
        }
    </script>
</head>
<body>
    <div>
        <canvas id='clock' width="500" height="500">浏览器不支持 canvas</canvas>
    </div>
</body>
</html>